<!doctype html>
<html lang="en-US">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hybridize â€” A Wings of Fire Tribe Randomizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
  <style>
    .panel {
      text-align: center;
    }

    .panel img {
      height: 200px;
    }

    #tribe_2_photo {
      transform: rotateY(180deg);
    }
  </style>
  <script>
    const HYBRIDIZE = (function () {
      return {
        mixed: false,
        TRIBES: [
          {
            name: 'Mudwing',
            photo: 'mudwing.jpg'
          },
          {
            name: 'Rainwing',
            photo: 'rainwing.jpg'
          },
          {
            name: 'Nightwing',
            photo: 'nightwing.jpg'
          },
          {
            name: 'Skywing',
            photo: 'skywing.jpg'
          },
          {
            name: 'Silkwing',
            photo: 'silkwing.jpg'
          },
          {
            name: 'Sandwing',
            photo: 'sandwing.jpg'
          },
          {
            name: 'Hivewing',
            photo: 'hivewing.jpg'
          },
          {
            name: 'Leafwing',
            photo: 'leafwing.jpg'
          },
          {
            name: 'Seawing',
            photo: 'seawing.jpg'
          },
          {
            name: 'Icewing',
            photo: 'icewing.jpg'
          },
        ],

        hybridize: function hybridize(tribes) {
          if (!HYBRIDIZE.mixed) HYBRIDIZE.mixed = true;

          let tribe1 = tribes[Math.floor(Math.random() * tribes.length)];
          let tribe2 = tribes[Math.floor(Math.random() * tribes.length)];

          if (tribe1.name === tribe2.name) return hybridize(tribes);

          const tribe1Name = document.getElementById('tribe_1_name');
          const tribe1Photo = document.getElementById('tribe_1_photo');

          const tribe2Name = document.getElementById('tribe_2_name');
          const tribe2Photo = document.getElementById('tribe_2_photo');

          tribe1Name.innerHTML = tribe1.name;
          tribe1Photo.setAttribute('src', `./images/${tribe1.photo}`);

          tribe2Name.innerHTML = tribe2.name;
          tribe2Photo.setAttribute('src', `./images/${tribe2.photo}`);
        },

        countdown: function countdown() {
          let duration = 5;
          const statusMsg = document.getElementById('status');

          statusMsg.textContent = duration;
          const countdown = setInterval(function () {
            duration -= 1;
            console.log(duration);
            statusMsg.textContent = duration;
            if (duration <= 0) {
              console.log('done!');
              clearInterval(countdown);
            }
          }, 1000);

        },

        showMixed: function hideUnMixed() {
          const items = document.getElementsByClassName('hide');
          Object.keys(items)
            .forEach(function (index) {
              items[index].classList.replace('hide', 'show');
            })
        },

      }
    })();

    window.onload = () => {

      const theButton = document.getElementById('hybridizerBtn');
      theButton.addEventListener('click', function () {
        HYBRIDIZE.hybridize(HYBRIDIZE.TRIBES);
        HYBRIDIZE.showMixed();
      });
    }
  </script>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <div class="jumbotron">
          <div class="row">
            <div class="col-xs-12">
                <button id="hybridizerBtn" class="btn btn-primary btn-lg" type="button">Your Hybrid is a&hellip;</button>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-5">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title"><span id="tribe_1_name">Waiting for tribe&hellip;</span></h3>
                </div>
                <div class="panel-body">
                  <img id="tribe_1_photo" src />
                </div>
              </div>
            </div>
            <div class="col-xs-1">
              <p style="text-align: center">with</p>
            </div>
            <div class="col-xs-5">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title"><span id="tribe_2_name">Waiting for tribe&hellip;</span></h3>
                </div>
                <div class="panel-body">
                  <img id="tribe_2_photo" src />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</body>

</html>